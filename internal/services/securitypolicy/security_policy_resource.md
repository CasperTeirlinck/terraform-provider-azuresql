---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "azuresql_security_policy Resource - terraform-provider-azuresql"
subcategory: ""
description: |-
  Manage a database security policy.
---

# azuresql_security_policy (Resource)

Manage a database security policy.

**Supported**: `SQL database` 

**Not supported**: `Synapse dedicated database`, `Synapse serverless database`


## Example Usage

```terraform
provider "azuresql" {
}

data "azuresql_sqlserver" "server" {
  server = "mysqlserver"
}

data "azuresql_database" "database" {
  server = data.azuresql_sqlserver.server.id
  name   = "mydatabase"
}

data "azuresql_schema" "dbo" {
    database 	= data.azuresql_database.database.id
    name 		  = "dbo"
}

resource "azuresql_function" "filter" {
    database 	= data.azuresql_database.database.id
    name      = "filter"
    schema		= data.azuresql_schema.dbo.id
    raw       = <<-EOT
        create function dbo.filter(@user as varchar(50))
        returns table 
        with SCHEMABINDING AS
        return  select 1 as result
        where @user in (select suser_sname())
    EOT
}

resource "azuresql_security_policy" "filter" {
  database = data.azuresql_database.database.id
  name     = "filter_policy"
  schema   = data.azuresql_schema.dbo.id
}

data "azuresql_table" "mytable" {
    database 	  = data.azuresql_database.database.id
    schema      =  data.azuresql_schema.dbo.id
    name     	  = "mytable"
}

resource "azuresql_security_predicate" "filter_select" {
  database          = data.azuresql_database.database.id
  security_policy   = azuresql_security_policy.filter.id
  table             = data.azuresql_table.mytable.id
  rule              = "dbo.filter(user)"
  type              = "filter"

  # a lifecyle rule informs Terraform about the dependency between this predicate and the function
  lifecycle {
    replace_triggered_by = [azuresql_function.filter]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `database` (String) ID of the database where the security policy should be created.

- `name` (String) Name of the security policy
- `schema` (String) ID of the `azuresql_schema` in which the function should be created.

### Read-Only

- `id` (String)  azuresql ID of the security policy resource.
- `object_id` (Number) ID of the security policy object in the database.
